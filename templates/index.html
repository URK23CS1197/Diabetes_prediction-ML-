<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Diabetes Prediction</title>
  <style>
    /* Basic page setup */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f4f8;
      color: #333;
      max-width: 450px;
      margin: 40px auto;
      padding: 20px 30px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      background-color: #fff;
    }

    h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
    }

    form label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      color: #34495e;
    }

    input[type="number"] {
      width: 100%;
      padding: 8px 10px;
      font-size: 15px;
      border: 2px solid #dce3e8;
      border-radius: 6px;
      transition: border-color 0.3s ease;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 6px rgba(52, 152, 219, 0.5);
    }

    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    button {
      width: 48%;
      padding: 12px;
      font-size: 17px;
      font-weight: 700;
      color: #fff;
      background-color: #3498db;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #2980b9;
    }

    button.reset-btn {
      background-color: #95a5a6;
    }

    button.reset-btn:hover {
      background-color: #7f8c8d;
    }

    #result {
      margin-top: 25px;
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      padding: 15px;
      border-radius: 6px;
      background-color: #ecf0f1;
      color: #2c3e50;
      min-height: 60px;
      white-space: pre-line; /* allow line breaks */
    }

    /* Responsive for smaller screens */
    @media (max-width: 480px) {
      body {
        margin: 20px 15px;
        padding: 15px 20px;
      }
      .button-group {
        flex-direction: column;
      }
      button {
        width: 100%;
        margin-bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <h2>Diabetes Prediction Form</h2>
  <form id="predictionForm">
    <label for="Pregnancies">Pregnancies:</label>
    <input type="number" id="Pregnancies" min="0" max="20" required />

    <label for="Glucose">Glucose:</label>
    <input type="number" id="Glucose" min="0" max="300" required />

    <label for="BloodPressure">Blood Pressure:</label>
    <input type="number" id="BloodPressure" min="0" max="200" required />

    <label for="SkinThickness">Skin Thickness:</label>
    <input type="number" id="SkinThickness" min="0" max="100" required />

    <label for="Insulin">Insulin:</label>
    <input type="number" id="Insulin" min="0" max="900" required />

    <label for="BMI">BMI:</label>
    <input type="number" id="BMI" min="0" max="70" step="0.1" required />

    <label for="DiabetesPedigreeFunction">Diabetes Pedigree Function:</label>
    <input type="number" id="DiabetesPedigreeFunction" min="0" max="2.5" step="0.001" required />

    <label for="Age">Age:</label>
    <input type="number" id="Age" min="0" max="120" required />

    <div class="button-group">
      <button type="submit">Predict</button>
      <button type="button" class="reset-btn" id="resetBtn">Reset</button>
    </div>
  </form>

  <div id="result"></div>

  <script>
    const form = document.getElementById("predictionForm");
    const resetBtn = document.getElementById("resetBtn");
    const resultDiv = document.getElementById("result");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = {
        Pregnancies: Number(document.getElementById("Pregnancies").value),
        Glucose: Number(document.getElementById("Glucose").value),
        BloodPressure: Number(document.getElementById("BloodPressure").value),
        SkinThickness: Number(document.getElementById("SkinThickness").value),
        Insulin: Number(document.getElementById("Insulin").value),
        BMI: Number(document.getElementById("BMI").value),
        DiabetesPedigreeFunction: Number(document.getElementById("DiabetesPedigreeFunction").value),
        Age: Number(document.getElementById("Age").value),
      };

      resultDiv.textContent = "Loading prediction...";
      resultDiv.style.backgroundColor = "#ecf0f1";
      resultDiv.style.color = "#2c3e50";

      try {
        const response = await fetch("http://127.0.0.1:5000/predict", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        const result = await response.json();

        if (response.ok) {
          let feedback = "";
          if (result.prediction === "Diabetic") {
            feedback = "Please consult your doctor for proper diagnosis and treatment.";
            resultDiv.style.backgroundColor = "#f8d7da";
            resultDiv.style.color = "#721c24";
          } else {
            feedback = "You seem healthy, keep up the good lifestyle!";
            resultDiv.style.backgroundColor = "#d4edda";
            resultDiv.style.color = "#155724";
          }

          resultDiv.textContent = `Prediction: ${result.prediction}\n\n${feedback}`;
        } else {
          resultDiv.textContent = `Error: ${result.error || "Unknown error"}`;
          resultDiv.style.backgroundColor = "#f8d7da";
          resultDiv.style.color = "#721c24";
        }
      } catch (error) {
        resultDiv.textContent = "Error: Could not connect to server.";
        resultDiv.style.backgroundColor = "#f8d7da";
        resultDiv.style.color = "#721c24";
      }
    });

    resetBtn.addEventListener("click", () => {
      form.reset();
      resultDiv.textContent = "";
      resultDiv.style.backgroundColor = "#ecf0f1";
      resultDiv.style.color = "#2c3e50";
    });
  </script>
  
</body>
</html>
